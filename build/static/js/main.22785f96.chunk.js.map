{"version":3,"sources":["components/landing/index.jsx","components/infoCard/index.jsx","components/onboarding/index.jsx","helpers/poser.js","components/webcam/index.jsx","helpers/webcam.js","components/card/index.jsx","components/setup/index.jsx","components/card/stopCard.jsx","components/dashboard/index.jsx","serviceWorker.js","index.js","router.jsx"],"names":["Home","className","src","alt","to","React","Component","InfoCard","class","this","props","children","classNamee","previous","next","MainApp","PoseNet","videoElement","canvasElement","ml5","window","poser","poseNet","defaults","points","eyes","shoulders","width","height","ctx","getContext","callback","on","results","isPoseProper","calculatePoseCorrectness","console","log","drawCanvas","i","length","pose","j","keypoints","rightEye","position","leftEye","left","right","Math","abs","y","clearRect","color","drawPoint","x","scale","ay","ax","by","bx","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","drawSegment","r","arc","PI","fillStyle","fill","App","state","stream","videoRef","canvasRef","blinkRef","setVideoRef","video","srcObject","setCanvasRef","canvas","startPosture","setupListener","isPoseGood","onPose","blinkHandler","eyeMan","init","document","createElement","start","addEventListener","onBlink","startAll","setBlinkRef","Promise","resolve","reject","navigator","mediaDevices","getUserMedia","then","catch","Error","setState","isAnalysing","autoPlay","onPlay","ref","id","WebcamCard","posture","renderText","text","disabled","onPoseHandleer","onClick","onStop","Dashboard","Date","diff","blinks","truePose","falsePose","tenSecArray","kill","timer","stopMatchTimer","blinkTimer","incrementBlink","throttleBlink","setTimeout","onPoseChange","pushToArray","newPose","tpsum","forEach","alert","push","throttlePoseChange","onStopTrack","e","preventDefault","clearInterval","setInterval","bpm","posePerc","style","display","margin","justifyContent","ms","round","Boolean","location","hostname","match","ReactDOM","render","path","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.22785f96.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./landing.css\";\n\nclass Home extends React.Component {\n  render() {\n    return (\n      <div className=\"Main\">\n        <div className=\"firstHalf\">\n          <img src=\"/images/computer.svg\" alt=\"Woman\" className=\"logo\" />\n        </div>\n        <div className=\"secondHalf\">\n          <span className=\"title\">Ergonomics</span>\n          <br></br>\n          <span className=\"tagline\">Made Simple</span>\n          <br></br>\n          <Link to=\"onboarding\" className=\"button firstButton\">\n            Let's Go\n          </Link>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Home;\n","import React from \"react\";\nimport \"./infoCard.css\";\nimport { Link } from \"react-router-dom\";\n\nclass InfoCard extends React.Component {\n  render() {\n    return (\n      <div class=\"InfoCard\">\n        <div class=\"Alignment\">\n          {this.props.children}\n          <div classNamee=\"InfoNav\">\n            {this.props.previous ? (\n              <Link to={this.props.previous} className=\"left\">\n                Previous\n              </Link>\n            ) : null}\n            {this.props.next ? (\n              <Link to={this.props.next} className=\"right\">\n                Next\n              </Link>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default InfoCard;\n","import React from \"react\";\nimport \"./mainApp.css\";\n\nimport InfoCard from \"../infoCard\";\n\nclass MainApp extends React.Component {\n  render() {\n    return (\n      <div class=\"MainApp\">\n        <InfoCard next=\"setup\">\n          <h2>HOW IT WORKS</h2>\n          <p>\n            Keep a good and straight posture before you start the posture\n            monitor. Any major deviation from the intial posture will alert you\n            to get back to the proper posture.\n          </p>\n          <ul>\n            <li>\n              Laptop should be placed such that top of the screen is at eye\n              level.\n            </li>\n            <li>Elbows should rest at 90 degree angle by your side.</li>\n            <li>\n              Every 10 minutes, take a short (10-20 second) break. Take your\n              hands off the keyboard and move!\n            </li>\n            <li>\n              The distance between the eye and the screen should be at least of\n              20-25 inches (approximately 50-63 cm). The place of the screen\n              should be as far away as possible and, optimally, it is\n              recommended to increase the font size.\n            </li>\n          </ul>\n        </InfoCard>\n      </div>\n    );\n  }\n}\n\nexport default MainApp;\n","class PoseNet {\n  constructor(videoElement, canvasElement) {\n    const ml5 = window[\"ml5\"];\n    this.poser = ml5.poseNet(videoElement, () => null);\n    this.defaults = null;\n    this.points = {\n      eyes: {},\n      shoulders: {},\n    };\n\n    this.width = videoElement.width;\n    this.height = videoElement.height;\n    canvasElement.width = videoElement.width;\n    canvasElement.height = videoElement.height;\n    this.ctx = canvasElement && canvasElement.getContext(\"2d\");\n  }\n\n  setupListener(callback) {\n    this.poser.on(\"pose\", results => {\n      const isPoseProper = this.calculatePoseCorrectness(results);\n      console.log(isPoseProper);\n      callback(isPoseProper);\n\n      if (this.ctx && this.defaults) {\n        this.drawCanvas(isPoseProper);\n      }\n    });\n  }\n\n  calculatePoseCorrectness(results) {\n    for (let i = 0; i < results.length; i++) {\n      let pose = results[i].pose;\n      for (let j = 0; j < pose.keypoints.length; j++) {\n        // let keypoint = pose.keypoints[j];\n        let rightEye = pose.keypoints[2].position;\n        let leftEye = pose.keypoints[1].position;\n        this.points.eyes.left = leftEye;\n        this.points.eyes.right = rightEye;\n        this.points.shoulders.left = pose.keypoints[6].position;\n        this.points.shoulders.right = pose.keypoints[5].position;\n\n        if (!this.defaults) {\n          this.defaults = {\n            leftEye,\n            rightEye,\n          };\n        }\n\n        if (Math.abs(rightEye.y - this.defaults.leftEye.y) < 30) {\n          return true;\n        }\n\n        if (Math.abs(rightEye.y - this.defaults.rightEye.y) > 30) {\n          return false;\n        }\n      }\n    }\n  }\n\n  drawCanvas(isPoseProper) {\n    const {\n      ctx,\n      points: { shoulders, eyes },\n    } = this;\n\n    ctx.clearRect(0, 0, this.width, this.height);\n\n    let color = isPoseProper ? \"green\" : \"red\";\n    const size = 5;\n\n    drawPoint(ctx, shoulders.left.y, shoulders.left.x, size, color);\n    drawPoint(ctx, shoulders.right.y, shoulders.right.x, size, color);\n    drawPoint(ctx, eyes.left.y, eyes.left.x, size, color);\n    drawPoint(ctx, eyes.right.y, eyes.right.x, size, color);\n\n    drawSegment(\n      ctx,\n      [shoulders.left.y, shoulders.left.x],\n      [shoulders.right.y, shoulders.right.x],\n      color,\n      1,\n    );\n  }\n}\n\nexport default PoseNet;\n\nfunction drawPoint(ctx, y, x, r, color) {\n  ctx.beginPath();\n  ctx.arc(x, y, r, 0, 2 * Math.PI);\n  ctx.fillStyle = color;\n  ctx.fill();\n}\n\nfunction drawSegment(ctx, [ay, ax], [by, bx], color, scale) {\n  ctx.beginPath();\n  ctx.moveTo(ax * scale, ay * scale);\n  ctx.lineTo(bx * scale, by * scale);\n  ctx.lineWidth = 1;\n  ctx.strokeStyle = color;\n  ctx.stroke();\n}\n","import React from \"react\";\nimport \"./webcam.css\";\n\nimport { getWebcamStream } from \"../../helpers/webcam\";\nimport PoseNet from \"../../helpers/poser\";\n\nclass App extends React.Component {\n  state = {\n    stream: null,\n  };\n\n  videoRef = null;\n  canvasRef = null;\n  blinkRef = null;\n\n  async componentDidMount() {\n    const stream = await getWebcamStream();\n\n    this.setState({\n      stream,\n    });\n  }\n\n  setVideoRef = video => {\n    this.videoRef = video;\n\n    if (video) {\n      video.srcObject = this.state.stream;\n    }\n  };\n\n  setCanvasRef = canvas => {\n    this.canvasRef = canvas;\n  };\n\n  startPosture = () => {\n    console.log(\"hello\");\n    const poser = new PoseNet(this.videoRef, this.canvasRef);\n\n    poser.setupListener(isPoseGood => {\n      const { onPose } = this.props;\n      onPose && onPose(isPoseGood);\n    });\n  };\n\n  blinkHandler = () => {\n    const eyeMan = new window[\"eyePlayer\"]();\n    console.log(this.blinkRef);\n    eyeMan.init(this.blinkRef, document.createElement(\"canvas\"));\n    eyeMan.start();\n\n    document.addEventListener(\"blinkEvent\", () => {\n      console.log(\"BLINKKK\");\n      this.props.onBlink();\n    });\n  };\n\n  renderResult() {\n    const { isAnalysing, isPoseGood } = this.state;\n\n    if (isAnalysing) {\n      if (isPoseGood === null) {\n        return \"Calculating...\";\n      }\n\n      return isPoseGood ? \"Correct Pose\" : \"Wrong Pose\";\n    }\n\n    return null;\n  }\n\n  startAll = () => {\n    if (window[\"startnotify\"]) {\n      window[\"startnotify\"]();\n    }\n    this.startPosture();\n    if (this.props.onBlink) {\n      console.log(\"blink on\");\n      this.blinkHandler();\n    }\n  };\n\n  setBlinkRef = video => {\n    this.blinkRef = video;\n    if (video) {\n      video.srcObject = this.state.stream;\n    }\n  };\n\n  render() {\n    const { stream } = this.state;\n    return (\n      <div className=\"App\">\n        {stream && (\n          <div className=\"videoContainer\">\n            <video\n              width=\"400px\"\n              height=\"550px\"\n              autoPlay\n              className=\"video\"\n              onPlay={this.startAll}\n              ref={this.setVideoRef}\n            />\n            <video autoPlay ref={this.setBlinkRef} id=\"notwanted\" />\n            <canvas\n              className=\"overlay\"\n              ref={this.setCanvasRef}\n              id=\"drawCanvas\"\n            ></canvas>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","export const getWebcamStream = () =>\n  new Promise((resolve, reject) => {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices\n        .getUserMedia({\n          video: {\n            height: 550,\n            width: 400,\n          },\n        })\n        .then(stream => resolve(stream))\n        .catch(reject);\n    } else {\n      reject(new Error(\"No Webcam found.\"));\n    }\n  });\n","import React from \"react\";\nimport \"./card.css\";\nimport { Link } from \"react-router-dom\";\nimport Webcam from \"../webcam\";\n\nclass WebcamCard extends React.Component {\n  state = {\n    posture: null,\n  };\n\n  renderText = () => {\n    const { posture } = this.state;\n    let text = \"Bad\";\n\n    if (posture === null) {\n      text = \"Loading\";\n    } else if (posture) {\n      text = \"Good\";\n    }\n\n    return <p className={text}>Posture is {text}!</p>;\n  };\n\n  render() {\n    return (\n      <div class=\"Card\">\n        {/* Insert webcam feed alone here instead of img*/}\n        <Webcam onPose={posture => this.setState({ posture })} />\n\n        <h2></h2>\n\n        {this.renderText()}\n        <Link id=\"initiator\" to=\"/dash\" disabled={this.state.posture === null}>\n          Start Tracking\n        </Link>\n      </div>\n    );\n  }\n}\n\nexport default WebcamCard;\n","import React from \"react\";\n\nimport Card from \"../card\";\n\nclass MainApp extends React.Component {\n  render() {\n    return (\n      <div class=\"MainApp\">\n        <Card>{/* <Webcam /> without blinking */}</Card>\n      </div>\n    );\n  }\n}\n\nexport default MainApp;\n","import React from \"react\";\nimport \"./card.css\";\nimport { Link } from \"react-router-dom\";\nimport Webcam from \"../webcam\";\n\nclass WebcamCard extends React.Component {\n  state = {\n    posture: null,\n  };\n\n  renderText = () => {\n    const { posture } = this.state;\n    let text = \"Bad\";\n\n    if (posture === null) {\n      text = \"Loading\";\n    } else if (posture) {\n      text = \"Good\";\n    }\n\n    return <p className={text}>Posture is {text}!</p>;\n  };\n\n  onPoseHandleer = pose => {\n    this.setState({ posture: pose });\n    this.props.onPose && this.props.onPose(pose);\n  };\n\n  render() {\n    return (\n      <div class=\"Card\">\n        {/* Insert webcam feed alone here instead of img*/}\n        <Webcam onBlink={this.props.onBlink} onPose={this.onPoseHandleer} />\n\n        <h2></h2>\n\n        {this.renderText()}\n        <button id=\"initiator\" onClick={this.props.onStop}>\n          Stop Tracking\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default WebcamCard;\n","import React from \"react\";\n\nimport StopWebcamCard from \"../card/stopCard\";\nimport InfoCard from \"../infoCard\";\n\nimport ms from \"pretty-ms\";\n\nexport default class Dashboard extends React.Component {\n  state = {\n    start: new Date(),\n    diff: null,\n    blinks: 0,\n    truePose: 0,\n    falsePose: 0,\n    tenSecArray: [],\n    kill: false,\n  };\n\n  timer = null;\n  stopMatchTimer = null;\n  blinkTimer = null;\n\n  componentDidMount() {\n    this.stopMatchTimer = setInterval(() => {\n      const diff = new Date() - this.state.start;\n      this.setState({\n        diff,\n      });\n    }, 1000);\n  }\n\n  incrementBlink = () => {\n    const { blinks, kill } = this.state;\n    if (kill) {\n      return;\n    }\n\n    console.log(\"BLINK\", blinks);\n    this.setState({\n      blinks: blinks + 1,\n    });\n  };\n\n  throttleBlink = () => {\n    if (this.blinkTimer) {\n      return;\n    }\n\n    this.timer = setTimeout(() => {\n      this.onPoseChange();\n      this.blinkTimer = null;\n    }, 2000);\n  };\n\n  pushToArray = newPose => {\n    const { tenSecArray } = this.state;\n\n    if (tenSecArray.length === 10) {\n      let tpsum = 0;\n\n      tenSecArray.forEach(pose => {\n        if (pose) {\n          tpsum++;\n        }\n      });\n\n      if (tpsum < 5) {\n        if (window[\"correctpos\"]) {\n          window[\"correctpos\"]();\n        } else {\n          alert(\"You are crouching, fix your pose!\");\n        }\n      }\n\n      this.setState({\n        tenSecArray: [],\n      });\n    } else {\n      tenSecArray.push(newPose);\n    }\n  };\n\n  onPoseChange = newPose => {\n    const { truePose, falsePose, kill } = this.state;\n    if (kill) {\n      return;\n    }\n    console.log(truePose, falsePose);\n    this.pushToArray(newPose);\n    if (newPose) {\n      this.setState({\n        truePose: truePose + 1,\n      });\n    } else {\n      this.setState({\n        falsePose: falsePose + 1,\n      });\n    }\n  };\n\n  throttlePoseChange = newPose => {\n    if (this.timer) {\n      return;\n    }\n\n    this.timer = setTimeout(() => {\n      this.onPoseChange(newPose);\n      this.timer = null;\n    }, 1000);\n  };\n\n  onStopTrack = e => {\n    e.preventDefault();\n    clearInterval(this.stopMatchTimer);\n    this.setState({\n      kill: true,\n    });\n\n    if (window[\"endnotify\"]) {\n      window[\"endnotify\"]();\n    }\n  };\n\n  render() {\n    const { blinks, diff, truePose, falsePose, kill } = this.state;\n\n    const bpm = blinks / (diff / 1000 / 60);\n\n    const posePerc = (truePose / (truePose + falsePose)) * 100;\n\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          margin: \"40px\",\n          justifyContent: \"space-evenly\",\n        }}\n      >\n        {!kill && (\n          <StopWebcamCard\n            onPose={this.throttlePoseChange}\n            onBlink={this.incrementBlink}\n            onStop={this.onStopTrack}\n          />\n        )}\n        <InfoCard class=\"infoinfo\">\n          <h2 className=\"reportTitle\">Reports</h2>\n          {this.state.diff ? <h3>Time since start: {ms(diff)}</h3> : null}\n          <h3 className=\"blinksPM\">Blinks per minute: {bpm}</h3>\n          <h3 className=\"ppp\">\n            Posture Perfection Percentage: {Math.round(posePerc)}%\n          </h3>\n        </InfoCard>\n      </div>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./router\";\n\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport LandingPage from \"./components/landing\";\nimport Onboarding from \"./components/onboarding\";\nimport Setup from \"./components/setup\";\nimport Dashboard from \"./components/dashboard\";\n\nexport default function App(props) {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/onboarding\">\n          <Onboarding />\n        </Route>\n\n        <Route path=\"/setup\">\n          <Setup />\n        </Route>\n\n        <Route path=\"/dash\">\n          <Dashboard />\n        </Route>\n\n        <Route path=\"/\">\n          <LandingPage />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n"],"sourceRoot":""}